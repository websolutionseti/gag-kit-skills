export const metadata = {
  title: "Example: Add a New Feature | Antigravity Kit",
  description: "Step-by-step guide on adding new features to an existing application using Antigravity Kit workflows.",
};

import { Callout, StepList, Step, Terminal, TerminalLine, TerminalBlock, ProTips, Tip } from '@/components/mdx'

# Add a New Feature

Learn how to safely add complex features to an existing codebase using the `/enhance` workflow.

## Overview

The `/enhance` workflow is your day-to-day tool for iterative development.
Unlike `/create` which builds from scratch, `/enhance` focuses on surgically adding functionality without breaking existing code.

<Callout type="info">
  **Scenario:** Adding a "Dashboard Analytics" feature to an existing SaaS application.
</Callout>

## The Process

<StepList>
  <Step number={1} title="Feature Planning">
    Describe your feature requirements clearly.

    ```bash
    /enhance Add an analytics dashboard for user activity
    Requirements:
    - Track daily active users and page views
    - Visual charts using Recharts
    - API endpoint to aggregate data
    ```
  </Step>
  <Step number={2} title="Component Implementation">
    Specialists implement the full vertical slice.

    <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
      <div className="bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-3 text-center">
        <div className="text-xs font-semibold">Database</div>
      </div>
      <div className="bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-3 text-center">
        <div className="text-xs font-semibold">Backend</div>
      </div>
      <div className="bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-3 text-center">
        <div className="text-xs font-semibold">Frontend</div>
      </div>
      <div className="bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-3 text-center">
        <div className="text-xs font-semibold">Testing</div>
      </div>
    </div>
  </Step>
  <Step number={3} title="Verify Integration">
    Run `final checks` to validate bundle size, accessibility, and tests.
  </Step>
</StepList>

## Example Session

<Terminal>
  <TerminalLine type="user">/enhance add dark mode toggle</TerminalLine>

  <TerminalBlock>
    <TerminalLine type="agent">**Analyzing codebase...**</TerminalLine>
    <div className="text-xs mt-2">
      Found: Tailwind CSS with no dark mode config<br/>
      Plan: Update tailwind.config, add ThemeProvider, create toggle component
    </div>
  </TerminalBlock>

  <div className="space-y-2 pl-8 mb-4">
    <div className="flex items-center gap-2">
      <span className="w-2 h-2 rounded-full bg-purple-500 animate-pulse"></span>
      <span><strong>Frontend:</strong> Creating ThemeToggle...</span>
    </div>
    <div className="flex items-center gap-2">
      <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
      <span><strong>Testing:</strong> Adding theme tests...</span>
    </div>
  </div>

  <TerminalBlock highlight>
    <TerminalLine type="agent">**âœ… Feature Added!**</TerminalLine>
    <span className="text-zinc-400">Run `/preview start` to test.</span>
  </TerminalBlock>
</Terminal>

## Pro Tips

<ProTips>
  <Tip title="Check Dependencies">
    Use `checklist.py` to prevent bundle bloat from new libraries.
  </Tip>
  <Tip title="Keep It Modular">
    Isolate new components to minimize side effects on existing code.
  </Tip>
</ProTips>

## Next Steps

- Try `/enhance` in your project
- See [Test Generation](/docs/guide/examples/test) for coverage
